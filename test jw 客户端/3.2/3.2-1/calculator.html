<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
 <meta http-equiv="content-type" content="text/html;charset=gb2312" /> 
  <link type="text/css" href="count.css" rel="stylesheet" />
 <title>简单计算器</title>
 <meta http-equiv="content-type" content="text/html" />
  <script>
        window.onload = function(){

            // 数据容器
            var left = 0;   //被除数
            var right = 0;  //除数
            var sum = 0;    //和  

            var numb = 0;   //此变量用来限制点的输入     
            // 获取id并返回
            function $(id){
                return document.getElementById(id);
            }
            // 运算函数
             function operation(id){            
                if( $("box").value != "0"){
                    if(left == 0)
                    {
                        $("box").value = $("box").value + $(id).value;
                        left = parseFloat($("box").value);
                    }
                }

                //numb 转为number类型 让点可以再输入一次
                numb = 0;
            }

            // 数字盘函数
            function figure(id){ 
            
                // 判断被除数是否有值
                if(left == 0)
                {
                    // 改变value默认值
                    if ($("box").value === "0" ) {
                        $("box").value = $(id).value; 
                    }else{
                        $("box").value = $("box").value + $(id).value;    
                    }                                
                }else{
                    $("box").value = $("box").value + $(id).value;
                    var str = $("box").value;
                    var num = "";                    
                    // 获取第二次输入的数字
                    for (var i = 0; i < str.length; i++) {
                        // 判断加减乘除
                        if(str[i]== "+"){
                            for (var j = i + 1; j < str.length; j++) {
                                num+=str[j];
                                
                            };
                            right = parseFloat(num);
                        }else if(str[i]== "-"){
                            for (var j = i + 1; j < str.length; j++) {
                                num+=str[j];
                                
                            };
                            right = parseFloat(num);
                        }
                        else if(str[i]== "X"){
                            for (var j = i + 1; j < str.length; j++) {
                                num+=str[j];
                                
                            };
                            right = parseFloat(num);
                        }
                        else if(str[i]== "/"){
                            for (var j = i + 1; j < str.length; j++) {
                                num+=str[j];
                                
                            };
                            right = parseFloat(num);
                        }
                    };                    
                }

                // 清空所有数据  
                if(sum != 0){
                    left = 0;
                    right = 0;
                    sum = 0;
                    numb = 0;
                    $("box").value = $(id).value;
                }
            
            }


　　　　　　　// 数字键盘区----------------------------------------------------------开始
            $("one").onclick = function(){ 
                figure("one");
            }
            $("two").onclick = function(){ 
                figure("two");
            }
            $("three").onclick = function(){ 
                figure("three");
            }
            $("four").onclick = function(){ 
                figure("four");
            }
            $("five").onclick = function(){ 
                figure("five");
            }
            $("six").onclick = function(){ 
                figure("six");
            }
            $("seven").onclick = function(){ 
                figure("seven");
            }
            $("eight").onclick = function(){ 
                figure("eight");
            }
            $("nine").onclick = function(){ 
                figure("nine");
            }
            $("zero").onclick = function(){ 
                figure("zero");
            }
 
　　　　　　  // 数字键盘区----------------------------------------------------------结束
            



　　　　　　　//功能区-----------------------------------------------------------开始

            // 加
            $("add").onclick = function(){             
                operation("add");
            }


            //减
            $("reduce").onclick = function(){             
                operation("reduce");
            }

            // 乘
            $("ride").onclick = function(){
                operation("ride");
            }
            
            // 除
            $("division").onclick = function(){
                operation("division");
            }

            // 点
            $("round").onclick = function(){
                // 限制点的输入
                if(numb === 0 && sum == 0){ //numb值等于0 类型等于number                        
                    $("box").value = $("box").value + $("round").value;
                    numb = ($("box").value); //numb赋值为字符串
                }

            }

            // 清除
            $("res").onclick = function(){
                if($("box").value != "0")
                {                        
                    left = 0;
                    right = 0;
                    sum = 0;
                    numb = 0;
                    $("box").value = "0";
                }
            }

            // 求和
            $("sum").onclick = function(){  
                var symbol = "";           
                if(left != 0 && right != 0){
                    for (var i = 0; i < $("box").value.length; i ++ ) {
                        symbol = $("box").value[i];
                        if(symbol == "+"){
                            sum = left + right;
                            $("box").value = sum;
                        }else if(symbol == "-"){
                            sum = left - right;
                            $("box").value = sum;
                        }
                        else if(symbol == "X"){
                            sum = left * right;
                            $("box").value = sum;

                        }
                        else if(symbol == "/"){
                            sum = left / right;
                            $("box").value = sum;
                        }
                    };
                }                            
            }
            
        }

　　　　　// 功能区--------------------------------------------------------------------------结束

        </script>
</head>
<body>
<div id="all"> 
  <input type="text" id="box" readonly="readonly" value="0" />
  <br /><br />
 <div>
  <input class="button" type="button" id="add" value="+" />&nbsp;&nbsp;
  <input class="button" type="button" id="reduce" value="-" />&nbsp;&nbsp;
  <input class="button" type="button" id="ride" value="X" />&nbsp;&nbsp;
  <input class="button" type="button" id="division" value="/" />&nbsp;&nbsp;
 </div>
 <br />
 <div id="big">
 <div>
  <input class="button" type="button" id="seven" value="7"  />&nbsp;&nbsp;
  <input class="button" type="button" id="eight" value="8"  />&nbsp;&nbsp;
  <input class="button" type="button" id="nine" value="9"  />&nbsp;&nbsp;
 </div>
  <br /><br />
 <div>
  <input class="button" type="button" id="four" value="4"  />&nbsp;&nbsp;
  <input class="button" type="button" id="five" value="5" />&nbsp;&nbsp;
  <input class="button" type="button" id="six" value="6" />&nbsp;&nbsp;
 </div>
 <br /><br />
 <div>
  <input class="button" type="button" id="one" value="1" />&nbsp;&nbsp;
  <input class="button" type="button" id="two" value="2" />&nbsp;&nbsp;
  <input class="button" type="button" id="three" value="3" />&nbsp;&nbsp;
 </div>
  <br /><br />
 <div>
  <input id="zero" type="button" id="zero" value="0"  />&nbsp;&nbsp;
  <input class="button" type="button" id="round" value="." />&nbsp;&nbsp;
 </div>
 </div>
 <div class="biglong">
  <input class="long" type="button" id="res" value="C" />
 </div>
 <br />
 <div class="biglong">
  <input class="long" type="button" id="sum" value="=" />
 </div>
</div>
</body>
</html>